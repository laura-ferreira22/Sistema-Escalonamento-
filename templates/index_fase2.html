<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fase 2 - Substituição de Páginas</title>
    <link rel="stylesheet" href="styles_fase2.css">
</head>
<body>
    <div class="container">
        <h1>Simulação de Substituição de Páginas</h1>
        
        <!-- Formulário para entrada de dados -->
        <div class="form-container">
            <label for="algoritmo">Escolha o algoritmo:</label>
            <select id="algoritmo">
                <option value="FIFO">FIFO</option>
                <option value="LRU">LRU</option>
            </select>

            <label for="processos">Número de processos:</label>
            <input type="number" id="processos" min="1" max="10" value="3">

            <label for="paginas">Páginas por processo (máx. 10):</label>
            <input type="number" id="paginas" min="1" max="10" value="5">

            <button id="iniciar-simulacao">Iniciar Simulação</button>
        </div>

        <!-- Área de resultados -->
        <div class="resultados">
            <h2>Resultados</h2>
            <div id="resultado-turnaround"></div>
            <div id="resultado-ram"></div>
            <div id="resultado-disco"></div>
        </div>

        <!-- Gráficos -->
        <div class="graficos">
            <h2>Gráficos</h2>
            <canvas id="grafico-ram"></canvas>
            <canvas id="grafico-disco"></canvas>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="utils.js"></script>
    <script src="substituicao.js">document.getElementById('iniciar-simulacao').addEventListener('click', () => {
        const algoritmo = document.getElementById('algoritmo').value;
        const numProcessos = parseInt(document.getElementById('processos').value);
        const numPaginas = parseInt(document.getElementById('paginas').value);
    
        // Gerar processos e páginas aleatórios para simulação
        const processos = [];
        for (let i = 1; i <= numProcessos; i++) {
            const paginas = [];
            for (let j = 1; j <= numPaginas; j++) {
                paginas.push({ id: (i - 1) * numPaginas + j });
            }
            processos.push({ id: i, paginas });
        }
    
        // Executar simulação
        const resultado = simular_execucao(processos, algoritmo);
    
        // Exibir resultados
        document.getElementById('resultado-turnaround').innerText = `Turnaround médio: ${resultado.turnaround.toFixed(2)} segundos`;
        document.getElementById('resultado-ram').innerText = `RAM: ${resultado.ram.join(', ')}`;
        document.getElementById('resultado-disco').innerText = `Disco: ${resultado.disco.join(', ')}`;
    
        // Atualizar gráficos
        atualizarGraficos(resultado.ram, resultado.disco);
    });
    
    function atualizarGraficos(ram, disco) {
        const ctxRam = document.getElementById('grafico-ram').getContext('2d');
        const ctxDisco = document.getElementById('grafico-disco').getContext('2d');
    
        new Chart(ctxRam, {
            type: 'bar',
            data: {
                labels: ram.map((_, i) => `Página ${i + 1}`),
                datasets: [{
                    label: 'Uso da RAM',
                    data: ram.map(() => 4), // Cada página ocupa 4 KB
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 200 // Capacidade máxima da RAM
                    }
                }
            }
        });
    
        new Chart(ctxDisco, {
            type: 'bar',
            data: {
                labels: disco.map((_, i) => `Página ${i + 1}`),
                datasets: [{
                    label: 'Uso do Disco',
                    data: disco.map(() => 4), // Cada página ocupa 4 KB
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }</script>
</body>
</html>

